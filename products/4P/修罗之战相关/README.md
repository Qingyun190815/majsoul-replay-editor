# 修罗之战模式

活动场对应 `mode_id` 是 40, 关键词是 `xuezhandaodi`

## 规则说明

- 配牌后选择3张牌, 与其他玩家交换
- 每一局的结束条件从有1人和牌变为有3人和牌 (即"血战到底")
- 发生和牌时, 点数实时结算, 手牌不公开, 如果玩家被飞则对局结束
- 一局结束后, 如果和牌人数小于3人, 视为流局
- 不设连庄, 无论庄家是否和牌/听牌, 均进入下一局的0本场
- 发生途中流局时, 无论是否有玩家已和牌, 本局0本场重开
- 同一局内, 已和牌的玩家不参与流局结算
- 流局时, 若没有玩家和牌, 则按照四人段位场规则, 若有玩家和牌, 则未听牌的玩家支付1000点给每位听牌的玩家
- 枪杠(含国士无双枪暗杠)可以和牌, 发生枪杠结算和牌后, 杠成立
- 枪杠后如果发生四杠散了, 枪杠成立, 本局因途中流局而重开
- 玩家立直时放铳
    - 如果点数支付放铳后剩余1000点以上, 则立直成立
    - 如果点数支付放铳后不足1000点, 则立直失败, 视为普通打牌, 对局继续
    - 如果点数支付放铳后为负数点, 则对局结束
- 大三元和大四喜不设包牌

## 函数特殊说明

### 换三张换牌: `huansanzhang(tiles0, tiles1, tiles2, tiles3, type)`

`tiles0, tiles1, tiles2, tiles3` : 表示四个人要交出去的三张牌

`type` : 0 表示逆时针换牌, 1 表示对家换牌, 2 表示顺时针换牌

例子: `huansanzhang("9p79s", "333s", "78p8s", "333z", 1);`

### 对局结束 `gameend()`

如果"血战到底"的模式的最后一局不是流局的话, 需要在牌谱文件的最后加一个 `gameend();` 表示对局结束, 否则最后会跳过最后一位玩家的和牌展示

### 和牌: `hupai(allseats, type)`

与段位场相比多了个参数 `type`, 值为 false 表示中途和牌, true 表示最终和牌, 默认为 false

例子: `hupai([0, 2, 3], true);` 和 `hupai(1);`
