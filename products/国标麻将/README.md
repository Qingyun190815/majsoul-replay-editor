# 国标麻将

与雀魂的立直麻将相比: 国标麻将**8番起和**, 有头跳, 无振听, 任何情况下没有连庄

开启国标模式需要在 `'detail_rule'` 中注明 `'guobiao': true`

以下番种主要根据 [雀渣平台](https://tziakcha.xyz) 规则(明暗杠设为5番, 有天地人和)

为了使得各家点数更加美观, 对局中将各家点数和结算点数都乘了 100 (即 `scale_points`)

对于诈和, 以及在没有设置 `'guobiao_no_8fanfu'` 的情况下不足8番的错和, 这里按照赔每家各 scale_points * 24 (24 即 `zhahu_points`) 点计算,

为方便编辑复杂牌谱, 提供了参数 `'guobiao_lianzhuang'`, 若为 `true`, 则可以连庄, 规则同立直麻将

正常情况下是没有花牌的, 但还是实现了花牌的功能(需要导入 [add_function.js](../../add_function.js)): 使用8张"0m"表示8张花牌,
补花操作类似拔北, 还添加了手牌有花牌不能和的判断, 但受限于实现方式, 与花牌有关的以下问题暂时没有很好的解决方法:

- 有玩家听"5m"时, 作为花牌的"0m"也会在铳牌提示中显示为红色
- 雀渣平台对于自摸的人和有以下描述: 第一巡摸牌摸到花牌, 补花后自摸, 不算人和. 但自制回放中仍会判断为人和

## 示例牌谱

- [国标所有番种nomi](国标所有番种nomi)
- [番种测试](番种测试)
- [理论最大牌型](理论最大牌型.js)
- [花牌测试](花牌测试.js)

## 番种一栏

|  名称   | 番数 |                   解释                   |            不计番种             |
|:-----:|:--:|:--------------------------------------:|:---------------------------:|
|  大四喜  | 88 |                                        |   三风刻, 碰碰和, 圈风刻, 门风刻, 幺九刻   |
|  大三元  | 88 |                                        |  双箭刻, 箭刻, 组成大三元的三副刻子不计幺九刻   |
|  绿一色  | 88 |                                        |      不计混一色, 无"发"可计清一色       |
| 九莲宝灯  | 88 |           必须是九面听牌, 即立直中的"纯九"           |  清一色, 不求人, 门前清, 无字, 一个幺九刻   |
|  四杠   | 88 |                 即"四杠子"                 |          碰碰和, 单钓将           |
|  连七对  | 88 |          类似"大竹林", 但可以下移或上移一位           | 清一色, 七对, 不求人, 门前清, 无字, 单钓将  |
|  十三幺  | 88 |                即"国士无双"                 |   混幺九, 五门齐, 不求人, 门前清, 单钓将   |
|       |    |                                        |                             |
|  清幺九  | 64 |                 即"清老头"                 | 混幺九, 碰碰和, 全带幺, 双同刻, 幺九刻, 无字 |
|  小四喜  | 64 |                                        |          三风刻, 幺九刻           |
|  小三元  | 64 |                                        |  双箭刻, 箭刻, 组成小三元的两副刻子不计幺九刻   |
|  字一色  | 64 |                                        |     混幺九, 碰碰和, 全带幺, 幺九刻      |
|  四暗刻  | 64 |                                        |        碰碰和, 不求人, 门前清        |
| 一色双龙会 | 64 |         由同花色"11223355778899"组成         |  七对, 清一色, 平和, 一般高, 老少副, 无字  |
|       |    |                                        |                             |
| 一色四同顺 | 48 |                                        | 一色三同顺, 一色三节高, 七对, 四归一, 一般高  |
| 一色四节高 | 48 |                                        |      一色三同顺, 一色三节高, 碰碰和      |
|       |    |                                        |                             |
| 一色四步高 | 32 |                                        |       一色三步高, 连六, 老少副        |
|  三杠   | 32 |                 即"三杠子"                 |                             |
|  混幺九  | 32 |                 即"混老头"                 |        碰碰和, 全带幺, 幺九刻        |
|       |    |                                        |                             |
|  七对   | 24 |           即"七对子", 但可以复合"四归一"           |        不求人, 门前清, 单钓将        |
| 七星不靠  | 24 |              有7个字牌的"全不靠"               |     全不靠, 五门齐, 不求人, 门前清      |
|  全双刻  | 24 |                只由偶数数牌组成                |         碰碰和, 断幺, 无字         |
|  清一色  | 24 |                                        |             无字              |
| 一色三同顺 | 24 |                即"1.5杯口"                |         一色三节高, 一般高          |
| 一色三节高 | 24 |              同种花色的"三色三节高"              |            一色三同顺            |
|  全大   | 24 |               只由数牌7-9组成                |           大于五, 无字           |
|  全中   | 24 |               只由数牌4-6组成                |           断幺, 无字            |
|  全小   | 24 |               只由数牌1-3组成                |           小于五, 无字           |
|       |    |                                        |
|  清龙   | 16 |                即"一气通贯"                 |           连六, 老少副           |
| 三色双龙会 | 16 |          2种花色2个老少副, 另一种花色5作将           |      平和, 老少副, 喜相逢, 无字       |
| 一色三步高 | 16 |           同花色的"三色三步高", 但可以增二           |
|  全带五  | 16 |              四个面子和雀头都有数牌5              |           断幺, 无字            |
|  三同刻  | 16 |                即"三色同刻"                 |             双同刻             |
|  三暗刻  | 16 |
|       |    |
|  全不靠  | 12 |        7种字牌及9种不同数字的三套筋共16张中的14张        |        五门齐, 不求人, 门前清        |
|  组合龙  | 12 |          三种花色的"147""258""369"          |
|  大于五  | 12 |               只由数牌6-9组成                |             无字              |
|  小于五  | 12 |               只由数牌1-4组成                |             无字              |
|  三风刻  | 12 |                 3个风牌刻子                 |       组成三风刻的三副刻子不计幺九刻       |
|       |    |
|  花龙   | 8  |             即三种花色混编的"一气通贯"             |
|  推不倒  | 8  |        手牌只包含"1234589p245689s5z"        |             缺一门             |
| 三色三同顺 | 8  |                即"三色同顺"                 |             喜相逢             |
| 三色三节高 | 8  |              刻子版本的"三色三步高"              |
|  无番和  | 8  |                手牌没有任何番                 |
| 妙手回春  | 8  |                即"海底捞月"                 |             自摸              |
| 海底捞月  | 8  |                即"河底捞鱼"                 |
| 杠上开花  | 8  |         即"岭上开花", 但可以和"妙手回春"复合          |             自摸              |
|  抢杠和  | 8  |                 即"枪杠"                  |             和绝张             |
|       |    |
|  碰碰和  | 6  |                 即"对对和"                 |
|  混一色  | 6  |
| 三色三步高 | 6  |           3种花色3副依次递增一位序数的顺子            |
|  五门齐  | 6  |
|  全求人  | 6  |               没有暗杠的四副露点和               |             单钓将             |            
|  双暗杠  | 6  |                                        |             双暗刻             |
|  双箭刻  | 6  |                 两个三元役牌                 |             箭刻              |        
|       |    |
|  全带幺  | 4  |          即"混全带", "纯全带"会复合"无字"          |
|  不求人  | 4  |               即"门前清自摸和"                |             自摸              |
|  双明杠  | 4  |
|  和绝张  | 4  |            用对于场上四家都是第四张的牌和牌            |
|       |    |
|  箭刻   | 2  |                 即三元役牌                  |          这副刻子不计幺九刻          |
|  圈风刻  | 2  |               即"役牌: 场风牌"               |          这副刻子不计幺九刻          |
|  门风刻  | 2  |               即"役牌: 门风牌"               |          这副刻子不计幺九刻          |
|  门前清  | 2  |         即"门前点和", 自摸的话升级为"不求人"          |
|  平和   | 2  |     与立直的区别: 能副露, 雀头不能是字牌, 听牌可以不是两面     |             无字              |
|  四归一  | 2  |        即四张一样的牌都在手牌中(不在副露中), 可叠加        |
|  双同刻  | 2  |                即"二色同刻"                 |
|  双暗刻  | 2  |           类似"三暗刻", 但可以有一个暗杠            |
|  暗杠   | 2  |                副露中有一个暗杠                |
|  断幺   | 2  |                 即"断幺九"                 |             无字              |
|       |    |
|  一般高  | 1  |           即"一杯口", 但可副露, 可叠加            |
|  喜相逢  | 1  |              即"二色同顺", 可叠加              |
|  连六   | 1  |          同花色相连6张牌组成的两副顺子, 可叠加          |
|  老少副  | 1  |       同花色同时存在顺子"123"和"789", 可叠加        |
|  幺九刻  | 1  |               明暗都可以, 可叠加               |
|  明杠   | 1  |                 有一个明杠                  |
|  缺一门  | 1  |                数牌只有两种花色                |
|  无字   | 1  |                  没有字牌                  |
|  边张   | 1  |        需要严格独听, 即12345和3不会计"边张"         |
|  坎张   | 1  |                 需要严格独听                 |
|  单钓将  | 1  |                 需要严格独听                 |
|  自摸   | 1  |                 副露也可以                  |
|       |    |
|  明暗杠  | 5  |                 一明杠一暗杠                 |
|       |    |
|  天和   | 8  |                庄家起手即和牌                 |             不求人             |
|  地和   | 8  |        闲家点和庄家本盘打出的第一张牌, 与立直中不同         |             门前清             |
|  人和   | 8  | 闲家尚未摸牌就和其他闲家本盘打出的第一张牌<br>或者闲家本盘首次摸牌就和牌 |          不求人, 门前清           |

## 番种名称修改

因为有些汉字无法作为役种名称显示, 故对下列番种的名称进行了修改, 修改的名称尽量贴合立直麻将中的

|  原名称  | 无法显示的汉字 |     新名称      |
|:-----:|:-------:|:------------:|
| 一色四节高 |   节高    | 111222333444 |
|       |
| 一色四步高 |   步高    | 123345567789 |
|       |
| 一色三步高 |   步高    |  123345567   |
|       |
| 七星不靠  |    靠    |     七星不顺     |
| 一色三节高 |   节高    |  111222333   |
|       |
|  推不倒  |   推倒    |     对称牌      |
| 三色三节高 |   节高    | 111 222 333  |
|  无番和  |    番    |     无役和      |
| 妙手回春  |   妙春    |     海底摸月     |
|       |
| 三色三步高 |   步高    | 123 234 345  |
|  全求人  |    求    |    十二落抬点和    |
|  双箭刻  |    箭    |     双三元刻     |
|       |
|  全不靠  |    靠    |     全不顺      |
|  组合龙  |    组    |     混合龙      |
|  大于五  |    于    |      大五      |
|  小于五  |    于    |      小五      |
|       |
|  不求人  |    求    |    门前清自摸和    |
|  双明杠  |    明    |     双大杠      |
|  和绝张  |   绝张    |     和断牌      |
|       |
|  箭刻   |    箭    |     三元刻      |
|  圈风刻  |    圈    |     场风刻      |
|  四归一  |    归    |     四合一      |
|       |
|  一般高  |    高    |     一杯口      |
|  喜相逢  |    逢    |     二色同顺     |
|  老少副  |    少    |     幺九副      |
|  明杠   |    明    |      大杠      |
|  缺一门  |    缺    |     无一门      |
|  边张   |   边张    |     一二八九     |
|  坎张   |   坎张    |     一三七九     |
|       |
|  明暗杠  |    明    |     大暗杠      |

合并后编号一栏(三元刻细分):

|  编号  |  原名称  |     现名称      | 番数 |   可用语音   |
|:----:|:-----:|:------------:|:--:|:--------:|
| 8000 |  大四喜  |     大四喜      | 88 |  "大四喜"   |
| 8001 |  大三元  |     大三元      | 88 |  "大三元"   |
| 8002 |  绿一色  |     绿一色      | 88 |  "绿一色"   |
| 8003 | 九莲宝灯  |     九莲宝灯     | 88 |  "九莲宝灯"  |
| 8004 |  四杠   |      四杠      | 88 |  "四杠子"   |
| 8005 |  连七对  |     连七对      | 88 |
| 8006 |  十三幺  |     十三幺      | 88 |  "国士无双"  |
|      |       |              |    |
| 8007 |  清幺九  |     清幺九      | 64 |  "清老头"   |
| 8008 |  小四喜  |     小四喜      | 64 |  "小四喜"   |
| 8009 |  小三元  |     小三元      | 64 |  "小三元"   |
| 8010 |  字一色  |     字一色      | 64 |  "字一色"   |
| 8011 |  四暗刻  |     四暗刻      | 64 |  "四暗刻"   |
| 8012 | 一色双龙会 |    一色双龙会     | 64 |
|      |       |              |    |
| 8013 | 一色四同顺 |    一色四同顺     | 48 |
| 8014 | 一色四节高 | 111222333444 | 48 |
|      |       |              |    |
| 8015 | 一色四步高 | 123345567789 | 32 |
| 8016 |  三杠   |      三杠      | 32 |  "三杠子"   |
| 8017 |  混幺九  |     混幺九      | 32 |  "混老头"   |
|      |       |              |    |
| 8018 |  七对   |      七对      | 24 |  "七对子"   |
| 8019 | 七星不靠  |     七星不顺     | 24 |
| 8020 |  全双刻  |     全双刻      | 24 |
| 8021 |  清一色  |     清一色      | 24 |  "清一色"   |
| 8022 | 一色三同顺 |    一色三同顺     | 24 |
| 8023 | 一色三节高 |  111222333   | 24 |
| 8024 |  全大   |      全大      | 24 |
| 8025 |  全中   |      全中      | 24 |
| 8026 |  全小   |      全小      | 24 |
|      |       |              |    |
| 8027 |  清龙   |      清龙      | 16 |  "一气通贯"  |
| 8028 | 三色双龙会 |    三色双龙会     | 16 |
| 8029 | 一色三步高 |  123345567   | 16 |
| 8030 |  全带五  |     全带五      | 16 |
| 8031 |  三同刻  |     三同刻      | 16 |  "三色同刻"  |
| 8032 |  三暗刻  |     三暗刻      | 16 |  "三暗刻"   |
|      |       |              |    |
| 8033 |  全不靠  |     全不顺      | 12 |
| 8034 |  组合龙  |     混合龙      | 12 |
| 8035 |  大于五  |      大五      | 12 |
| 8036 |  小于五  |      小五      | 12 |
| 8037 |  三风刻  |     三风刻      | 12 |
|      |       |              |    |
| 8038 |  花龙   |      花龙      | 8  |
| 8039 |  推不倒  |     对称牌      | 8  |
| 8040 | 三色三同顺 |    三色三同顺     | 8  |  "三色同顺"  |
| 8041 | 三色三节高 | 111 222 333  | 8  |
| 8042 |  无番和  |     无役和      | 8  |
| 8043 | 妙手回春  |     海底摸月     | 8  |  "海底摸月"  |
| 8044 | 海底捞月  |     海底捞月     | 8  |  "河底捞鱼"  |
| 8045 | 杠上开花  |     杠上开花     | 8  |  "岭上开花"  |
| 8046 |  抢杠和  |     抢杠和      | 8  |   "枪杠"   |
|      |       |              |    |
| 8047 |  碰碰和  |     碰碰和      | 6  |  "对对和"   |
| 8048 |  混一色  |     混一色      | 6  |  "混一色"   |
| 8049 | 三色三步高 | 123 234 345  | 6  |
| 8050 |  五门齐  |     五门齐      | 6  |
| 8051 |  全求人  |    十二落抬点和    | 6  |
| 8052 |  双暗杠  |     双暗杠      | 6  |
| 8053 |  双箭刻  |     双三元刻     | 6  |
|      |       |              |    |
| 8054 |  全带幺  |     全带幺      | 4  | "混全带幺九"  |
| 8055 |  不求人  |    门前清自摸和    | 4  | "门前清自摸和" |
| 8056 |  双明杠  |     双大杠      | 4  |
| 8057 |  和绝张  |     和断牌      | 4  |
|      |       |              |    |
| 8058 |  箭刻   |    三元刻 白     | 2  |  "役牌 白"  |
| 8059 |  箭刻   |    三元刻 发     | 2  |  "役牌 发"  |
| 8060 |  箭刻   |    三元刻 中     | 2  |  "役牌 中"  |
| 8061 |  圈风刻  |     场风刻      | 2  |          |
| 8062 |  门风刻  |     门风刻      | 2  |          |
| 8063 |  门前清  |     门前清      | 2  |
| 8064 |  平和   |      平和      | 2  |   "平和"   |
| 8065 |  四归一  |     四合一      | 2  |   "根"    |
| 8066 |  双同刻  |     双同刻      | 2  |
| 8067 |  双暗刻  |     双暗刻      | 2  |
| 8068 |  暗杠   |      暗杠      | 2  |
| 8069 |  断幺   |      断幺      | 2  |  "断幺九"   |
|      |       |              |    |
| 8070 |  一般高  |     一杯口      | 1  |  "一杯口"   |
| 8071 |  喜相逢  |     二色同顺     | 1  |
| 8072 |  连六   |      连六      | 1  |
| 8073 |  老少副  |     幺九副      | 1  |
| 8074 |  幺九刻  |     幺九刻      | 1  |
| 8075 |  明杠   |      大杠      | 1  |
| 8076 |  缺一门  |     无一门      | 1  |
| 8077 |  无字   |      无字      | 1  |
| 8078 |  边张   |     一二八九     | 1  |
| 8079 |  坎张   |     一三七九     | 1  |
| 8080 |  单钓将  |     单钓将      | 1  |
| 8081 |  自摸   |      自摸      | 1  | "门前清自摸和" |
|      |       |              |    |
| 8082 |  明暗杠  |     大暗杠      | 5  |
|      |       |              |    |
| 8083 |  天和   |      天和      | 8  |   "天和"   |
| 8084 |  地和   |      地和      | 8  |   "地和"   |
| 8085 |  人和   |      人和      | 8  |

8091-8099 是花牌, 分别对应有1-8个花牌和花牌"一大堆"的情况

## 套算一次原则

以下番种同时出现时, 因有"套算一次原则", 结算时必须要剔除掉一个番种

番种保留顺序也遵照雀渣平台: 一般高 > 喜相逢 > 连六 > 老少副

|     番种集合     | 要剔除的番种 |    示例牌型(忽略将牌)    |
|:------------:|:------:|:----------------:|
| 2个一般高, 2个喜相逢 | 1个喜相逢  | 223344m234p 234p |
| 2个一般高, 2个连六  |  1个连六  | 112233456m 456m  |
| 2个一般高, 2个老少副 | 1个老少副  | 112233789m 789m  |
|              |        |
| 2个喜相逢, 2个连六  |  1个连六  |  123456m123456p  |
| 2个喜相逢, 2个老少副 | 1个老少副  |  123789m123789p  |
|              |        |
| 花龙, 喜相逢, 连六  |   连六   | 123456m456p789s  |
| 花龙, 喜相逢, 老少副 |  老少副   | 123789m456p789s  |
