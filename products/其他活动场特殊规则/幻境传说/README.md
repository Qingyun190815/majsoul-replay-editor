# 幻境传说模式

活动场对应 `mode_id` 是 46, 关键词是 `field_spell_mode`

## 规则说明

新增"庄家卡", "机会卡", "命运卡"3类卡片, 每类各5种

对局开始前, 从上述3类卡片中各随机抽选1张, 作为该模式的特殊规则

## 卡片功能一览

| 卡片类别 | 卡片名称 |                功能                | 所在5位 mode 的位数 | 对应数字 |
|:----:|:----:|:--------------------------------:|:-------------:|:----:|
| 庄家卡  |  风纪  | 庄家荣和时, 必须处于立直或副露状态, 不可默听(自摸不受影响) |      最右位      |  1   |
| 庄家卡  |  永夜  |   庄家连庄时, 本场数+5, 庄家未连庄的流局本场数+1    |      最右位      |  2   |
| 庄家卡  |  没收  |       若本局流局, 所有供托的立直棒归庄家所有       |      最右位      |  3   |
| 庄家卡  |  炒作  | 庄家每次碰/杠牌时, 额外翻开一张新的宝牌指示牌(上限不超过4) |      最右位      |  4   |
| 庄家卡  |  赠品  |       庄家荣和时, 每张宝牌额外加计1000点       |      最右位      |  5   |
|      |      |                                  |
| 机会卡  | 里世界  |    立直和牌时, 除赤宝牌外, 表宝牌无效, 里宝牌x2    |      中间位      |  1   |
| 机会卡  | 三倍速  |       立直后的3巡内均计入一发(如无人吃碰杠)       |      中间位      |  2   |
| 机会卡  | 金闪闪  |            宝牌指示牌也是宝牌             |      中间位      |  3   |
| 机会卡  | 超断幺  |             断幺九记为3番役             |      中间位      |  4   |
| 机会卡  | 胜负手  |     立直变为2番, 一发变为2番, 两立直变为4番      |      中间位      |  5   |
|      |      |                                  |
| 命运卡  | 夸大其词 |          不听罚符及流局满贯的结算加倍          |      最左位      |  1   |
| 命运卡  | 过度准备 |            立直需要2000点             |      最左位      |  2   |
| 命运卡  | 厄运沙漏 |    立直宣言后, 每张舍牌会导致和牌时的点数减少300点    |      最左位      |  3   |
| 命运卡  | 暗中交易 |     吃碰明杠时, 需要给打出这张牌的玩家支付500点     |      最左位      |  4   |
| 命运卡  | 爱的代价 |   吃碰明杠其他玩家打出的宝牌时, 需要支付2000点供托    |      最左位      |  5   |

## mode 的说明

`field_spell_mode` 共有5位, 其中第2位和第4位恒为0, 两个0正好把其他三个数字分成了三部分

最左边一位表示"命运卡", 中间位表示"机会卡", 最右位表示"庄家卡", 每种卡片对应的数字已在上表罗列

比如 `10203` 表示三种卡片"命运卡-夸大其词", "机会卡-三倍速", "庄家卡-没收"效果叠加对应的模式

---

该模式因为组合众多, 所以很难调试, bug可能也比较多

## 示例牌谱

- [demo01](demo01.js)
